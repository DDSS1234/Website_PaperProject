<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Creating with Paper â€“ Instructions</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <button id="menuBtn" aria-label="Open menu" aria-expanded="false" aria-controls="siteMenu" class="menu-btn">
      <svg viewBox="0 0 24 24" width="28" height="28" class="burger">
        <path class="l1" d="M3 10h16" />
        <path class="l2" d="M3 14h16" />
      </svg>
    </button>
  </header>

  <nav id="siteMenu" class="menu" hidden>
    <ul>
      <li><a href="Test.html">Home</a></li>
      <li><a href="About.html">About</a></li>
      <li><a href="instructions.html">Instructions</a></li>
    </ul>
  </nav>

  <div class="progress"><div class="progress-bar"></div></div>

  <main class="instructions-main">
    <div class="instructions-container">
      <div class="step">
        <h1 class="step-title">Module</h1>
        <img class="instruction-image" src="images/Place.png" alt="Step 1 icon">
        <h4 class="step-description">Start</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 1</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 1 icon">
        <h4 class="step-description">Gather</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 2</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 2 icon">
        <h4 class="step-description">Prepare</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 3</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 3 icon">
        <h4 class="step-description">Blend</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 4</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 4 icon">
        <h4 class="step-description">Pour</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 5</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 5 icon">
        <h4 class="step-description">Pull</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 6</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 6 icon">
        <h4 class="step-description">Press</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 7</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 7 icon">
        <h4 class="step-description">Remove</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 8</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 8 icon">
        <h4 class="step-description">Dry</h4>
      </div>
      <div class="step">
        <h2 class="step-title">Step 9</h2>
        <img class="instruction-image" src="images/Place.png" alt="Step 9 icon">
        <h4 class="step-description">Build</h4>
      </div>
      <div class="step">
        <h4 class="step-description">Questions?</h4>
      </div>      
    </div>
  </main>
<script>
  const btn = document.getElementById('menuBtn');
  const menu = document.getElementById('siteMenu');

  function setOpen(isOpen) {
    btn.setAttribute('aria-expanded', String(isOpen));
    if (isOpen) {
      menu.hidden = false;
      menu.dataset.open = 'true';
      document.documentElement.classList.add('menu-open');
      document.body.classList.add('menu-open');
    } else {
      menu.dataset.open = 'false';
      document.documentElement.classList.remove('menu-open');
      document.body.classList.remove('menu-open');
      setTimeout(() => { menu.hidden = true; }, 400);
    }
  }

  btn.addEventListener('click', () => {
    const open = btn.getAttribute('aria-expanded') === 'true';
    setOpen(!open);
  });

  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && btn.getAttribute('aria-expanded') === 'true') setOpen(false);
  });

  menu.addEventListener('click', (e) => {
    if (e.target === menu) setOpen(false);
  });
  
  const container = document.querySelector('.instructions-container');
  const progressBar = document.querySelector('.progress-bar');
  let isWheelScrolling = false;
  let stepHeight = container.clientHeight;

  function updateStepHeight() {
    stepHeight = container.clientHeight;
  }

  container.addEventListener('wheel', (e) => {
    e.preventDefault();
    if (isWheelScrolling) return;
    isWheelScrolling = true;

    const dir = Math.sign(e.deltaY) || 1;
    const max = container.scrollHeight - container.clientHeight;
    const nextTop = Math.max(0, Math.min(container.scrollTop + dir * stepHeight, max));

    container.scrollTo({ top: nextTop, behavior: 'smooth' });

    // allow another tick after the smooth scroll settles
    setTimeout(() => { isWheelScrolling = false; }, 500);
  }, { passive: false });

  function updateProgress() {
    const max = container.scrollHeight - container.clientHeight;
    const percent = max ? container.scrollTop / max : 0;
    // On screens wider than 768px, the progress bar fills vertically (height changes, width is 100%)
    if (window.matchMedia('(min-width: 768px)').matches) {
      progressBar.style.height = `${percent * 100}%`;
      progressBar.style.width = '100%';
    } else {
      // On smaller screens, the progress bar fills horizontally (width changes, height is 100%)
      progressBar.style.width = `${percent * 100}%`;
      progressBar.style.height = '100%';
    }
  }

  container.addEventListener('scroll', updateProgress);
  window.addEventListener('resize', () => {
    updateStepHeight();
    updateProgress();
  });
  updateStepHeight();
  updateProgress();
</script>
</body>
</html>
